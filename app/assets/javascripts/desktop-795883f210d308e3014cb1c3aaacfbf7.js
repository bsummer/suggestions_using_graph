mc_shared_assets.scope("mc_shared_assets.header.desktop",function(e){function t(t){var s=t.account;s?(e.setAccount(s),i=s.cart_count||0,e.setCart(i),s.id&&o(s.id)):e.setCart(0)}function s(){$("#mc-header-customer-care").click(function(e){return e.stopImmediatePropagation(),mc_shared_assets.trigger("userClickedCustomerCare"),!1}),$("#mc-header-join").click(function(e){return e.stopImmediatePropagation(),mc_shared_assets.trigger("userClickedJoin"),!1}),$("#mc-header-sign-in").click(function(e){return e.stopImmediatePropagation(),mc_shared_assets.trigger("userClickedSignIn"),!1}),$("#mc-header-sign-out").click(function(e){return e.stopImmediatePropagation(),mc_shared_assets.trigger("userClickedSignOut"),!1}),$("#mc-header-checkout-button").click(function(e){return e.stopImmediatePropagation(),mc_shared_assets.trigger("userClickedCheckout"),!1}),$("#mc-header-shopping-bag, #mc-header-cart-count").click(function(e){return e.stopImmediatePropagation(),mc_shared_assets.trigger("userClickedCart"),!1})}function a(){var e=$("ul#mc-header-my-account-dropdown");$("#mc-header-my-account").hover(function(){$(this).addClass("hover"),e.css("display","inline-block")},function(){$(this).removeClass("hover"),e.css("display","none")})}function n(){$("#mc-header-navigation > li").each(function(){var t=$(".tab",this),s=$(".dropdown",this);mc_shared_assets.isTouchDevice()?(t.bind("click",function(t){return s.is(":visible")?void 0:(e.closeAllMenus(),s.css("display","block"),t.preventDefault(),t.stopImmediatePropagation(),!1)}),$("body").bind("touchstart",function(t){if(s.is(":visible")){var a=$(t.target).closest("[href]");a.length||(e.closeAllMenus(),t.stopImmediatePropagation())}})):$(this).hover(function(){s.css("display","block")},function(){s.css("display","none")})})}function o(e){var t=$("#style-gallery-user-page");$.getJSON("/style-gallery/api/v1/contributors/"+e+"/outfits.json",function(s){s.outfits&&s.outfits.length>0&&(t.html("<a href='/style-gallery/users/"+e+"'>Style Gallery Photos</a>"),t.show())})}mc_shared_assets.loadWebFont();var i=0,c=function(t){i+=t,e.setCart(i)},r=function(e){$("#mc-header-navigation a.tab").removeClass("active"),/^[\w\-]+$/.exec(e)&&$("#mc-header-navigation >li."+e+" a.tab").addClass("active")};e.initialize=function(){s(),n(),setTimeout(e.loadDynamicContent,2e3)},e.setAccount=function(e){if($("#mc-header-customer-care").toggleClass("signed-in",!!e),e&&e.id){a(),$("#mc-header-join, #mc-header-sign-in").css("display","none"),$("#mc-header-my-account, #mc-header-sign-out").css("display","inline-block"),$("#mc-header-welcome-name").html(e.welcome_name||e.name);var t=$("#mc-header-loved-items");t.html("<a href='"+(e.loved_items_path||"/storefront/products/greatest_loves_of_all")+"' data-noroute='true'>("+(e.loved_count||0)+")</a>"),t.fadeIn("slow").css("display","inline-block");var s=$("#mc-header-social-profile-photo");e.fb_photo_url?(s.html("<a href='/customers/dashboard'><img src='"+e.fb_photo_url+"'/></a>"),s.fadeIn("slow").css("display","inline-block")):s.css("display","none")}},e.setCart=function(e){var t=$("#mc-header-cart-count"),s=$("#mc-header-checkout-button");e&&e>0?(t.html("( "+e+" item"+(e>1?"s":"")+" )"),t.fadeIn("slow").css("display","inline-block"),s.fadeIn("slow").css("display","inline-block")):(t.css("display","none"),s.css("display","none"))},e.loadDynamicContent=function(){$.getJSON("/storefront/latest/header_links",function(e){function t(e){function t(e){var t=$("<li></li>").appendTo(s);$("<a></a>").text(e.title).attr("href",e.href).appendTo(t)}for(var s=$("<ul></ul>"),a=0;a<e.length;a++)t(e[a]);return s.html()}$("#mc-header-feature-blog ul").html(t(e.blog)),$("ul.top-nav-gift-links").html(t(e.gifts)),$("ul.top-nav-spotlight-styles-links").html(t(e.spotlight_styles))})},e.closeAllMenus=function(){$("#mc-header-navigation > li >.dropdown").hide()},mc_shared_assets.on("setPersonalization",t),mc_shared_assets.on("incrementCartCount",c),mc_shared_assets.on("setActiveMenu",r),$(function(){e.initialize()})});